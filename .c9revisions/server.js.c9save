{"ts":1377725338822,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"process.env.NODE_ENV = 'production';\r\n\r\nvar passport = require('passport');\r\nvar context = require(\"rekuire\")(\"webconfiguration\");\r\nvar env = require(\"rekuire\")(\"env\");\r\n\r\nvar indexController = env.require(\"/server/controller/IndexController\").getInstance();\r\nvar movieController = env.require(\"/server/controller/MovieController\").getInstance();\r\nvar searchController = env.require(\"/server/controller/SearchController\").getInstance();\r\n\r\ncontext.app.get('/', indexController.index);\r\n\r\ncontext.app.get('/movie/search', searchController.search);\r\n\r\ncontext.app.get('/movie/quote', movieController.randomQuote);\r\n\r\ncontext.app.get('/movie/mymovies', movieController.myMovies);\r\n\r\ncontext.app.get('/movie/upcoming', movieController.upcoming);\r\n\r\ncontext.app.get('/movie/top', movieController.topmovies);\r\n\r\ncontext.app.post('/movie/mark', movieController.mark);\r\n\r\ncontext.app.post('/movie/unmark', movieController.unmark);\r\n\r\n// Auth2\r\ncontext.app.get('/auth/google',\r\n  passport.authenticate('google', { scope: ['https://www.googleapis.com/auth/userinfo.profile',\r\n                                            'https://www.googleapis.com/auth/userinfo.email',\r\n                                            'https://www.googleapis.com/auth/calendar'] }),\r\n  function(req, res){}\r\n);\r\n\r\ncontext.app.get('/auth/google/callback', passport.authenticate('google', { failureRedirect: '/login' }), function(req, res) {res.redirect('/');});\r\n\r\ncontext.app.get('/logout', function(req, res){\r\n  req.logout();\r\n  res.redirect('/');\r\n});\r\n\r\nconsole.log('Listening on port ', env.ip , env.port, process.env.NODE_ENV);\r\n\r\ncontext.app.listen(env.port, env.ip);"]],"start1":0,"start2":0,"length1":0,"length2":1644}]],"length":1644}
{"contributors":[],"silentsave":false,"ts":1377725178115,"patch":[[{"diffs":[[0,");\r\n"],[-1,"var movieController = env.require(\"/server/controller/MovieController\").getInstance();\r\nvar searchController = env.require(\"/server/controller/SearchController\").getInstance();\r\n\r\ncontext.app.get('/', indexController.index);\r\n\r\ncontext.app.get('/movie/search', searchController.search);\r\n\r\ncontext.app.get('/movie/quote', movieController.randomQuote);\r\n\r\ncontext.app.get('/movie/mymovies', movieController.myMovies);\r\n\r\ncontext.app.get('/movie/upcoming', movieController.upcoming);\r\n\r\ncontext.app.get('/movie/top', movieController.topmovies);\r\n\r\ncontext.app.post('/movie/mark', movieController.mark);\r\n\r\ncontext.app.post('/movie/unmark', movieController.unmark"],[1,"\r\ncontext.app.get('/', indexController.index"],[0,");\r\n"]],"start1":256,"start2":256,"length1":668,"length2":52}]],"length":1028,"saved":false}
